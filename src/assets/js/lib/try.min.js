var TryTextileObserver=Class.create({initialize:function(e,t,s){this.observable=$(e),this.resultElement=$(t),this.htmlResultElement=$(s),this.initObserver()},initObserver:function(){new Form.Element.Observer(this.observable,.2,this.parseTextile.bind(this))},parseTextile:function(e){var t=this,s=t.observable.form.action;s.blank()&&(s="/"),new Ajax.Request(s,{parameters:{text:t.observable.value},onSuccess:function(e){t.resultElement.update(e.responseText),t.htmlResultElement.update(e.responseText.escapeHTML())}})}});document.observe("dom:loaded",function(){new TryTextileObserver("text_in","result","html-result").parseTextile()});
