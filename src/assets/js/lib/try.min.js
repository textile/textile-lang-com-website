var TryTextileObserver=Class.create({initialize:function(e,t,s){this.observable=$(e),this.resultElement=$(t),this.htmlResultElement=$(s),this.initObserver()},initObserver:function(){new Form.Element.Observer(this.observable,.2,this.parseTextile.bind(this))},parseTextile:function(e){var s=this,t=s.observable.form.action;t.blank()&&(t="/"),new Ajax.Request(t,{parameters:{text:s.observable.value},onSuccess:function(e){var t=e.responseText.evalJSON();s.resultElement.update(t.response),s.htmlResultElement.update(t.response.escapeHTML())}})}});document.observe("dom:loaded",function(){new TryTextileObserver("text_in","result","html-result").parseTextile()});
